<!doctype html>
<html lang="en-GB"><head><meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">

	<link rel="icon" type="image/png" href="../favicon.png">

	<title>Magic mode | Docs | Ractive.js</title>

	
	<link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700,900" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="../min.css"></head>

<body class="example"><header class="docs-header"><nav><a href="http://ractivejs.org">&laquo; back to ractivejs.org</a>
			<a class="edit-link" href="https://github.com/RactiveJS/docs.ractivejs.org/edit/master/docs/0.3.9/Magic mode.md"><span>edit this page</span></a></nav>

		<h1>Magic mode</h1></header>

	<main><div class="breadcrumbs"><a href="ractive-js-documentation">Home</a> &raquo; <a href="glossary">Glossary</a> &raquo; <a href="magic-mode">Magic mode</a></div>

<p>Normally, you would update data using <a href="ractive-set">ractive.set()</a>, <a href="ractive-animate">ractive.animate()</a>, or the <a href="array-modification">array mutator methods</a>.</p>
<p>If you&#39;re fortunate enough to be developing for modern browsers only, however, you have another option: magic mode. Magic mode uses ES5 accessors to allow you to do this:</p>
<pre class="prettyprint lang-js">var model = { message: 'hello' };

var ractive = new Ractive({
  el: container,
  template: 'message: {{message}}',
  magic: true,
  data: model
});

// instead of doing `ractive.set( 'message', 'goodbye' )`...
model.message = 'goodbye';</pre>

<h2 id="es-what-">ES what?</h2>
<p>ECMAScript 5 is the current version of the language more commonly known as JavaScript. Most ES5 features are widely supported in all current browsers.</p>
<p>One feature in particular, <code>Object.defineProperty</code>, allows us to define <em>accessors</em>, which are functions that get called when you get or set the value of a property on an object. For those curious, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">MDN has comprehensive docs</a>.</p>
<p>(If you have to support IE8, or particularly old versions of Firefox or Opera, you may as well stop reading unfortunately. There&#39;s a <a href="http://kangax.github.io/es5-compat-table/#Object.defineProperty">compatibility table here</a>. Don&#39;t be fooled by the &#39;yes&#39; under IE8 &ndash; it&#39;s a broken implementation. Shocking, I know. Attempting to use magic mode in one of these browsers will cause Ractive to throw an error.)</p>
<p>Ractive, in magic mode, will <em>wrap</em> properties with accessors where necessary, saving you the work.</p>
<h2 id="why-not-to-use-it">Why not to use it</h2>
<p>Aside from the compatibility issue, there is a performance implication to be aware of. Wrapping and unwrapping properties isn&#39;t completely free, and using accessors (instead of direct property access) has a slight cost as well.</p>
<p>In the vast majority of cases this won&#39;t matter &ndash; we&#39;re talking fractions of milliseconds &ndash; but if you&#39;re <em>really</em> into performance, you might want to use the explicit <code>ractive.set()</code> approach. (Of course, you can still use the explicit methods when you&#39;re in magic mode.)</p>
<p>Also, be aware that if you have a situation like this...</p>
<pre class="prettyprint lang-html">&lt;div style='color: {{color}}; opacity: {{opacity}};'&gt;some content&lt;/div&gt;</pre>

<p>...then using <code>ractive.set({ color: &#39;red&#39;, opacity: 0.5 })</code> would only cause one DOM update, whereas <code>ractive.data.color = &#39;red&#39;</code> followed by <code>ractive.data.opacity = 0.5</code> would cause two. Again, in most real-world situations that&#39;s not a problem.</p>
<h2 id="using-magic-mode-with-arrays">Using magic mode with arrays</h2>
<p>Magic mode only works with properties that Ractive already knows about. Which means that if you do this...</p>
<pre class="prettyprint lang-html">&lt;ul&gt;
  {{#items}}
    &lt;li&gt;{{.}}&lt;/li&gt;
  {{/items}}
&lt;/ul&gt;</pre>

<pre class="prettyprint lang-js">var items = [ 'a', 'b', 'c' ];

var ractive = new Ractive({
  el: container,
  template: myTemplate,
  magic: true,
  data: { items: items }
});</pre>

<p>...you can&#39;t add items to the list by doing <code>items[3] = &#39;d&#39;</code>, for example. Instead, do <code>items.push(&#39;d&#39;)</code>, so Ractive becomes aware of the <code>items[3]</code> property.</p>
</main>

	
	<script src="../js/prettify.js"></script>
	<script>prettyPrint();

		// Googlytics
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-5602942-6', 'ractivejs.org');
		ga('send', 'pageview');</script></body></html>