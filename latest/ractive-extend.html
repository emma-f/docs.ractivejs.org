<!doctype html>
<html lang="en-GB"><head><meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">

	<link rel="icon" type="image/png" href="../favicon.png">

	<title>Ractive.extend() | Docs | Ractive.js</title>

	
	<link href="http://fonts.googleapis.com/css?family=Source+Code+Pro:400,700,900" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="../min.css"></head>

<body class="example"><header class="docs-header"><nav><a href=http://ractivejs.org>&laquo; back to ractivejs.org</a></nav>

		<h1>Ractive.extend()</h1></header>

	<main><div class="breadcrumbs"><a href="ractive-js-documentation">Home</a> &raquo; <a href="api-reference">API reference</a> &raquo; <a href="ractive-extend">Ractive.extend()</a></div>

<p>Ractive is more than a library; it is a platform. It makes it easier to create reusable, but specialised, blocks of functionality such as to-do lists, slideshows, bar charts, text editors, and so on.</p>
<p>Though it&#39;s technically incorrect, we&#39;ll refer to these as <em>subclasses</em> of the Ractive <em>base class</em>. In order to create them, we use <code>Ractive.extend()</code>.</p>
<p>Here&#39;s a simple example &ndash; we&#39;ll create a <code>Modal</code> subclass which has a default template, and which always stays centred on the page:</p>
<pre class="prettyprint lang-css">.modal-background {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background-color: rgba(0,0,0,0.5);
  padding: 0.5em;
  text-align: center;
  -moz-box-sizing: border-box; box-sizing: border-box;
}

.modal-outer {
  position: relative;
  width: 100%;
  height: 100%;
}

.modal {
  position: relative;
  background-color: white;
  padding: 2em;
  box-shadow: 1px 1px 3px rgba(0,0,0,0.1);
  margin: 0 auto;
  display: inline-block;
  max-width: 100%;
  max-height: 100%;
  overflow-y: auto;
  -moz-box-sizing: border-box; box-sizing: border-box;
}

.modal-button {
  text-align: center;
  background-color: rgb(70,70,180);
  color: white;
  padding: 0.5em 1em;
  display: inline-block;
  cursor: pointer;
}</pre>

<pre class="prettyprint lang-html">&lt;div class='modal-background' proxy-tap='close' intro='fadeIn' outro='fadeOut'&gt;
  &lt;div class='modal-outer'&gt;
    &lt;div class='modal'&gt;
      {{&gt;modalContent}}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>

<pre class="prettyprint lang-js">// Create our Modal subclass
Modal = Ractive.extend({
  // by default, the modal should sit atop the &lt;body&gt;...
  el: document.body,

  // ...but it should append to it rather than overwriting its contents
  append: true,

  // all Modal instances will share a template (though you can override it
  // on a per-instance basis, if you really want to)
  template: modalTemplate,

  // the init function will be called as soon as the instance has
  // finished rendering
  init: function () {
    var self = this, resizeHandler;

    // store references to the background, and to the modal itself
    // we'll assume we're in a modern browser and use querySelector
    this.outer = this.find( '.modal-outer' );
    this.modal = this.find( '.modal' );

    // if the user taps on the background, close the modal
    this.on( 'close', function ( el, event ) {
      if ( !this.modal.contains( event.target ) ) {
        this.teardown();
      }
    });

    // when the window resizes, keep the modal horizontally and vertically centred
    window.addEventListener( 'resize', resizeHandler = function () {
      self.center();
    }, false );

    // clean up after ourselves later
    this.on( 'teardown', function () {
      window.removeEventListener( 'resize', resizeHandler );
    }, false );

    // manually call this.center() the first time
    this.center();
  },

  center: function () {
    var outerHeight, modalHeight, verticalSpace;

    // horizontal centring is taken care of by CSS, but we need to
    // vertically centre
    outerHeight = this.background.clientHeight;
    modalHeight = this.modal.clientHeight;

    verticalSpace = ( backgroundHeight &ndash; modalHeight ) / 2;

    this.modal.style.top = verticalSpace + 'px';
  }
});

// We can now instantiate our modal
basicModal = new Modal({
  partials: {
    modalContent: '&lt;p&gt;This is some important content!&lt;/p&gt;&lt;a class="modal-button" proxy-tap="okay"&gt;Okay&lt;/a&gt;'
  }
});

basicModal.on( 'okay', function () {
  this.teardown();
});</pre>

<p>Subclasses can themselves be extended. Lets say we wanted to be able to create lots of modals similar to this one:</p>
<pre class="prettyprint lang-js">BasicModal = Modal.extend({
  partials: {
    modalContent: '&lt;p&gt;This is some important content!&lt;/p&gt;&lt;a class="modal-button" proxy-tap="okay"&gt;Okay&lt;/a&gt;'
  },

  init: function ( options ) {
    // wherever we overwrite methods, such as `init`, we can call the
    // overwritten method as `this._super`
    this._super( options );

    this.on( 'okay', function () {
      this.teardown();
    });
  }
});

basicModal = new BasicModal();</pre>

<p>The <code>init</code> method is able to call <code>this._super</code> because when Ractive detects (with regex, essentially by calling <code>init.toString()</code>) that a child method requires <code>this._super</code> it wraps it in a function that sets <code>this._super</code> to the parent method of the same name. This wrapping only happens where necessary.</p>
</main>

	
	<script src="../js/prettify.js"></script>
	<script>prettyPrint();

		// Googlytics
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-5602942-6', 'ractivejs.org');
		ga('send', 'pageview');</script></body></html>